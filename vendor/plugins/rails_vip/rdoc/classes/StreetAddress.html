<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>Class: StreetAddress</title>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
  <meta http-equiv="Content-Script-Type" content="text/javascript" />
  <link rel="stylesheet" href=".././rdoc-style.css" type="text/css" media="screen" />
  <script type="text/javascript">
  // <![CDATA[

  function popupCode( url ) {
    window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
  }

  function toggleCode( id ) {
    if ( document.getElementById )
      elem = document.getElementById( id );
    else if ( document.all )
      elem = eval( "document.all." + id );
    else
      return false;

    elemStyle = elem.style;
    
    if ( elemStyle.display != "block" ) {
      elemStyle.display = "block"
    } else {
      elemStyle.display = "none"
    }

    return true;
  }
  
  // Make codeblocks hidden by default
  document.writeln( "<style type=\"text/css\">div.method-source-code { display: none }</style>" )
  
  // ]]>
  </script>

</head>
<body>



    <div id="classHeader">
        <table class="header-table">
        <tr class="top-aligned-row">
          <td><strong>Class</strong></td>
          <td class="class-name-in-header">StreetAddress</td>
        </tr>
        <tr class="top-aligned-row">
            <td><strong>In:</strong></td>
            <td>
                <a href="../files/lib/app/models/street_address_rb.html">
                lib/app/models/street_address.rb
                </a>
        <br />
            </td>
        </tr>

        <tr class="top-aligned-row">
            <td><strong>Parent:</strong></td>
            <td>
                ActiveRecord::Base
            </td>
        </tr>
        </table>
    </div>
  <!-- banner header -->

  <div id="bodyContent">



  <div id="contextContent">



   </div>

    <div id="method-list">
      <h3 class="section-bar">Methods</h3>

      <div class="name-list">
      <a href="#M000069">before_create</a>&nbsp;&nbsp;
      <a href="#M000068">street_segments</a>&nbsp;&nbsp;
      </div>
    </div>

  </div>


    <!-- if includes -->

    <div id="section">


    <div id="constants-list">
      <h3 class="section-bar">Constants</h3>

      <div class="name-list">
        <table summary="Constants">
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">StreetSuffixes</td>
          <td>=</td>
          <td class="context-item-value">%w(ALLEY ANNEX ARCADE AVENUE BAYOO BEACH BEND BLUFF BLUFFS BOTTOM BOULEVARD BRANCH BRIDGE BROOK BROOKS BURG BURGS BYPASS CAMP CANYON CAPE CAUSEWAY CENTER CENTERS CIRCLE CIRCLES CLIFF CLIFFS CLUB COMMON CORNER CORNERS COURSE COURT COURTS COVE COVES CREEK CRESCENT CREST CROSSING CROSSROAD CURVE DALE DAM DIVIDE DRIVE DRIVES ESTATE ESTATES EXPRESSWAY EXTENSION EXTENSIONS FALL FALLS FERRY FIELD FIELDS FLAT FLATS FORD FORDS FOREST FORGE FORGES FORK FORKS FORT FREEWAY GARDEN GARDENS GATEWAY GLEN GLENS GREEN GREENS GROVE GROVES HARBOR HARBORS HAVEN HEIGHTS HIGHWAY HILL HILLS HOLLOW INLET ISLAND ISLANDS ISLE JUNCTION JUNCTIONS KEY KEYS KNOLL KNOLLS LAKE LAKES LAND LANDING LANE LIGHT LIGHTS LOAF LOCK LOCKS LODGE LOOP MALL MANOR MANORS MEADOW MEADOWS MEWS MILL MILLS MISSION MOTORWAY MOUNT MOUNTAIN MOUNTAINS NECK ORCHARD OVAL OVERPASS PARK PARKS PARKWAY PARKWAYS PASS PASSAGE PATH PIKE PINE PINES PLACE PLAIN PLAINS PLAZA POINT POINTS PORT PORTS PRAIRIE RADIAL RAMP RANCH RAPID RAPIDS REST RIDGE RIDGES RIVER ROAD ROADS ROUTE ROW RUE RUN SHOAL SHOALS SHORE SHORES SKYWAY SPRING SPRINGS SPUR SPURS SQUARE SQUARES STATION STRAVENUE STREAM STREET STREETS SUMMIT TERRACE THROUGHWAY TRACE TRACK TRAFFICWAY TRAIL TUNNEL TURNPIKE UNDERPASS UNION UNIONS VALLEY VALLEYS VIADUCT VIEW VIEWS VILLAGE VILLAGES VILLE VISTA WALK WALKS WALL WAY WAYS WELL WELLS ALLEE ALLY ALY ANEX ANNX ANX ARC AV AVE AVEN AVENU AVN AVNUE BAYOU BCH BND BLF BLUF BOT BOTTM BTM BLVD BOUL BOULV BR BRNCH BRDGE BRG BRK BYP BYPA BYPAS BYPS CMP CP CANYN CNYN CYN CPE CAUSWAY CSWY CEN CENT CENTR CENTRE CNTER CNTR CTR CIR CIRC CIRCL CRCL CRCLE CLF CLFS CLB COR CORS CRSE CRT CT CTS CV CK CR CRK CRECENT CRES CRESENT CRSCNT CRSENT CRSNT CRSSING CRSSNG XING DL DM DIV DV DVD DR DRIV DRV EST ESTS EXP EXPR EXPRESS EXPW EXPY EXT EXTN EXTNSN EXTS FLS FRRY FRY FLD FLDS FLT FLTS FRD FORESTS FRST FORG FRG FRK FRKS FRT FT FREEWY FRWAY FRWY FWY GARDN GDN GRDEN GRDN GDNS GRDNS GATEWY GATWAY GTWAY GTWY GLN GRN GROV GRV HARB HARBR HBR HRBOR HAVN HVN HEIGHT HGTS HT HTS HIGHWY HIWAY HIWY HWAY HWY HL HLS HLLW HOLLOWS HOLW HOLWS INLT IS ISLND ISLNDS ISS ISLES JCT JCTION JCTN JUNCTN JUNCTON JCTNS JCTS KY KYS KNL KNOL KNLS LK LKS LNDG LNDNG LA LANES LN LGT LF LCK LCKS LDG LDGE LODG LOOPS MNR MNRS MDW MDWS MEDOWS ML MLS MISSN MSN MSSN MNT MT MNTAIN MNTN MOUNTIN MTIN MTN MNTNS NCK ORCH ORCHRD OVL PK PRK PARKWY PKWAY PKWY PKY PKWYS PATHS PIKES PNES PL PLN PLAINES PLNS PLZ PLZA PT PTS PRT PRTS PR PRARIE PRR RAD RADIEL RADL RANCHES RNCH RNCHS RPD RPDS RST RDG RDGE RDGS RIV RIVR RVR RD RDS SHL SHLS SHOAR SHR SHOARS SHRS SPG SPNG SPRNG SPGS SPNGS SPRNGS SQ SQR SQRE SQU SQRS STA STATN STN STRA STRAV STRAVE STRAVEN STRAVN STRVN STRVNUE STREME STRM ST STR STRT SMT SUMIT SUMITT TER TERR TRACES TRCE TRACKS TRAK TRK TRKS TRFY TR TRAILS TRL TRLS TUNEL TUNL TUNLS TUNNELS TUNNL TPK TPKE TRNPK TRPK TURNPK UN VALLY VLLY VLY VLYS VDCT VIA VIADCT VW VWS VILL VILLAG VILLG VILLIAGE VLG VLGS VL VIS VIST VST VSTA WY WLS BYU BLFS BRKS BG BGS CTRS CIRS CMN CVS CRST XRD CURV DRS FRDS FRGS GLNS GRNS GRVS HBRS LGTS MTWY MTNS OPAS PSGE PNE RTE SKWY SQS STS TRWY UPAS UNS WL)</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">Directions</td>
          <td>=</td>
          <td class="context-item-value">%w(N NE E SE S SW W NW)</td>
        </tr>
        </table>
      </div>
    </div>



      


    <!-- if method_list -->
    <div id="methods">
      <h3 class="section-bar">Public Instance methods</h3>

      <div id="method-M000069" class="method-detail">
        <a name="M000069"></a>

        <div class="method-heading">
          <a href="#M000069" class="method-signature">
          <span class="method-name">before_create</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
standardize address into database
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000069-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000069-source">
<pre>
    <span class="ruby-comment cmt"># File lib/app/models/street_address.rb, line 14</span>
14:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">before_create</span>
15:                 <span class="ruby-comment cmt"># standardize/split house number</span>
16:                 <span class="ruby-identifier">housematch</span> = <span class="ruby-constant">Regexp</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value str">'(\d*)((.*?)+)'</span>, <span class="ruby-keyword kw">true</span>)
17:                 <span class="ruby-identifier">housematch</span>.<span class="ruby-identifier">match</span>(<span class="ruby-identifier">house_number</span>)
18:                 <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">std_house_number</span>      = <span class="ruby-constant">Regexp</span>.<span class="ruby-identifier">last_match</span>(<span class="ruby-value">1</span>).<span class="ruby-identifier">to_i</span>
19:                 <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">std_house_number_suff</span> = <span class="ruby-constant">Regexp</span>.<span class="ruby-identifier">last_match</span>(<span class="ruby-value">2</span>).<span class="ruby-identifier">nil?</span> <span class="ruby-operator">||</span> <span class="ruby-constant">Regexp</span>.<span class="ruby-identifier">last_match</span>(<span class="ruby-value">2</span>).<span class="ruby-identifier">eql?</span>(<span class="ruby-value str">&quot;&quot;</span>) <span class="ruby-operator">?</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-operator">:</span> <span class="ruby-constant">Regexp</span>.<span class="ruby-identifier">last_match</span>(<span class="ruby-value">2</span>) 
20: 
21:                 <span class="ruby-comment cmt"># split street name</span>
22:                 <span class="ruby-comment cmt"># search for already established suffixes if they're available</span>
23:                 <span class="ruby-identifier">suff_search</span> = <span class="ruby-identifier">street_suffix</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-value">? </span><span class="ruby-constant">StreetSuffixes</span>.<span class="ruby-identifier">join</span>(<span class="ruby-value str">'|'</span>) <span class="ruby-operator">:</span> <span class="ruby-identifier">street_suffix</span> 
24:                 <span class="ruby-identifier">street_direction_search</span>   = <span class="ruby-identifier">street_direction</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-value">? </span> <span class="ruby-constant">Directions</span>.<span class="ruby-identifier">join</span>(<span class="ruby-value str">'|'</span>) <span class="ruby-operator">:</span> <span class="ruby-identifier">street_direction</span>
25:                 <span class="ruby-identifier">addr_direction_search</span>     = <span class="ruby-identifier">address_direction</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-value">? </span><span class="ruby-constant">Directions</span>.<span class="ruby-identifier">join</span>(<span class="ruby-value str">'|'</span>) <span class="ruby-operator">:</span> <span class="ruby-identifier">address_direction</span>
26:                 
27:                 <span class="ruby-identifier">address_split_regex_str</span> = <span class="ruby-node">&quot;^((#{street_direction_search}) )?(.*?)( (#{suff_search}))?( (#{addr_direction_search}))?$&quot;</span>
28:                 <span class="ruby-identifier">address_split_regex</span> = <span class="ruby-constant">Regexp</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">address_split_regex_str</span>,<span class="ruby-keyword kw">true</span>)
29:                 
30:                 <span class="ruby-identifier">address_split_regex</span>.<span class="ruby-identifier">match</span>(<span class="ruby-identifier">street_name</span>)
31:                 
32:                 <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">street_direction</span>  <span class="ruby-operator">||=</span> <span class="ruby-constant">Regexp</span>.<span class="ruby-identifier">last_match</span>(<span class="ruby-value">1</span>).<span class="ruby-identifier">nil?</span> <span class="ruby-operator">||</span> <span class="ruby-constant">Regexp</span>.<span class="ruby-identifier">last_match</span>(<span class="ruby-value">1</span>).<span class="ruby-identifier">eql?</span>(<span class="ruby-value str">''</span>) <span class="ruby-operator">?</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-operator">:</span> <span class="ruby-constant">Regexp</span>.<span class="ruby-identifier">last_match</span>(<span class="ruby-value">2</span>) 
33:                 <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">std_street_name</span>     = <span class="ruby-constant">Regexp</span>.<span class="ruby-identifier">last_match</span>(<span class="ruby-value">3</span>).<span class="ruby-identifier">nil?</span> <span class="ruby-operator">||</span> <span class="ruby-constant">Regexp</span>.<span class="ruby-identifier">last_match</span>(<span class="ruby-value">3</span>).<span class="ruby-identifier">eql?</span>(<span class="ruby-value str">''</span>) <span class="ruby-operator">?</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-operator">:</span> <span class="ruby-constant">Regexp</span>.<span class="ruby-identifier">last_match</span>(<span class="ruby-value">3</span>) 
34:                 <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">street_suffix</span>     <span class="ruby-operator">||=</span> <span class="ruby-constant">Regexp</span>.<span class="ruby-identifier">last_match</span>(<span class="ruby-value">4</span>).<span class="ruby-identifier">nil?</span> <span class="ruby-operator">||</span> <span class="ruby-constant">Regexp</span>.<span class="ruby-identifier">last_match</span>(<span class="ruby-value">4</span>).<span class="ruby-identifier">eql?</span>(<span class="ruby-value str">''</span>) <span class="ruby-operator">?</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-operator">:</span> <span class="ruby-constant">Regexp</span>.<span class="ruby-identifier">last_match</span>(<span class="ruby-value">5</span>) 
35:                 <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">address_direction</span> <span class="ruby-operator">||=</span> <span class="ruby-constant">Regexp</span>.<span class="ruby-identifier">last_match</span>(<span class="ruby-value">6</span>).<span class="ruby-identifier">nil?</span> <span class="ruby-operator">||</span> <span class="ruby-constant">Regexp</span>.<span class="ruby-identifier">last_match</span>(<span class="ruby-value">6</span>).<span class="ruby-identifier">eql?</span>(<span class="ruby-value str">''</span>) <span class="ruby-operator">?</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-operator">:</span> <span class="ruby-constant">Regexp</span>.<span class="ruby-identifier">last_match</span>(<span class="ruby-value">7</span>) 
36:         <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000068" class="method-detail">
        <a name="M000068"></a>

        <div class="method-heading">
          <a href="#M000068" class="method-signature">
          <span class="method-name">street_segments</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
returns any street segments that this address starts or ends
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000068-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000068-source">
<pre>
    <span class="ruby-comment cmt"># File lib/app/models/street_address.rb, line 9</span>
 9:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">street_segments</span>
10:                 <span class="ruby-identifier">start_street_segments</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">end_street_segments</span>
11:         <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>


    </div>


  </div>


<div id="validator-badges">
  <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
</div>

</body>
</html>